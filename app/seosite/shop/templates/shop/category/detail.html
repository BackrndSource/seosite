{% extends "shop/layouts/base.html" %}
{% load static %}
{% block title %}{{category.title}}{% endblock %}
{% block meta_description %}{{category.description}}{% endblock %}
{% block meta_keywords %}{{category.keywoords}}{% endblock %}

{% block content %}

<!-- BREADCRUMB -->
{% include "shop/components/breadcrumb.html" with obj=category %}

<!-- CLUSTER -->
{% include "shop/components/cluster.html" with objs=category.childs.all parent=category %}

{% comment %} PROMO PRODUCTS {% endcomment %}
{% if promo_products is not None %}
<section class="bg-white px-4 md:px-24 grid grid-cols-1 divide-y">
    <div class="w-full container flex flex-wrap items-center justify-start py-1 gap-2">
        <h2 class="uppercase tracking-wide font-normal text-gray-900 text-2xl p-1 rounded-sm">
            Nuevos productos con descuento</h2>
        <svg class="fill-amber-500 h-8 w-8" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
            <path
                d="M42.3,24l3.4-5.1a2,2,0,0,0,.2-1.7A1.8,1.8,0,0,0,44.7,16l-5.9-2.4-.5-5.9a2.1,2.1,0,0,0-.7-1.5,2,2,0,0,0-1.7-.3L29.6,7.2,25.5,2.6a2.2,2.2,0,0,0-3,0L18.4,7.2,12.1,5.9a2,2,0,0,0-1.7.3,2.1,2.1,0,0,0-.7,1.5l-.5,5.9L3.3,16a1.8,1.8,0,0,0-1.2,1.2,2,2,0,0,0,.2,1.7L5.7,24,2.3,29.1a2,2,0,0,0,1,2.9l5.9,2.4.5,5.9a2.1,2.1,0,0,0,.7,1.5,2,2,0,0,0,1.7.3l6.3-1.3,4.1,4.5a2,2,0,0,0,3,0l4.1-4.5,6.3,1.3a2,2,0,0,0,1.7-.3,2.1,2.1,0,0,0,.7-1.5l.5-5.9L44.7,32a2,2,0,0,0,1-2.9ZM18,31.1l-4.2-3.2L12.7,27h-.1l.6,1.4,1.7,4-2.1.8L9.3,24.6l2.1-.8L15.7,27l1.1.9h0a11.8,11.8,0,0,0-.6-1.3l-1.6-4.1,2.1-.9,3.5,8.6Zm3.3-1.3-3.5-8.7,6.6-2.6.7,1.8L20.7,22l.6,1.6L25.1,22l.7,1.7L22,25.2l.7,1.9,4.5-1.8.7,1.8Zm13.9-5.7-2.6-3.7-.9-1.5h-.1a14.7,14.7,0,0,1,.4,1.7l.8,4.5-2.1.9-5.9-7.7,2.2-.9,2.3,3.3,1.3,2h0a22.4,22.4,0,0,1-.4-2.3l-.7-4,2-.8L33.8,19,35,20.9h0s-.2-1.4-.4-2.4L34,14.6l2.1-.9,1.2,9.6Z" />
        </svg>
    </div>
    <div class="pt-2">
        {% include "shop/product/components/slider.html" with objs=promo_products.all|slice:":15" carusel_id='carousel-popular '%}
    </div>
</section>
{% endif %}
{% if bestselling_products is not None %}
<section class="bg-white px-4 md:px-24 grid grid-cols-1 divide-y">
    <div class="w-full container flex flex-wrap items-center justify-between py-1">
        <h2 class="uppercase tracking-wide font-normal text-gray-900 text-2xl p-1 rounded-sm">
            Los m√°s vendidos en {{category.title}}</h2>
    </div>
    <div class="pt-2">
        {% include "shop/product/components/slider.html" with objs=bestselling_products.all|slice:":15" carusel_id='carousel-popular' %}
    </div>
</section>
{% endif %}
{% if bestrated_products is not None %}
<section class="bg-white px-4 md:px-24 grid grid-cols-1 divide-y">
    <div class="w-full container flex flex-wrap items-center justify-between py-1">
        <h2 class="uppercase tracking-wide font-normal text-gray-900 text-2xl p-1 rounded-sm">
            Los mejor valorados en {{category.title}}</h2>
    </div>
    <div class="pt-2">
        {% include "shop/product/components/slider.html" with objs=bestrated_products.all|slice:":15" carusel_id='carousel-popular' %}
    </div>
</section>
{% endif %}

<!-- SUB CATEGORIES LIST -->
{% include "shop/category/components/product-list.html" with objs=category.childs.all %}

<!-- REVIEWS LIST -->
{% include "shop/category/components/reviews.html" with about=category.title reviews=reviews|slice:":5" %}

<!-- CATEGORY DETAILS - TEXT -->
<section class="bg-gray-100 py-8">
    <div class="grid grid-cols-1 gap-8 2xl:grid-cols-2">
        <div class="container pb-8 pl-12 mx-auto">
            <h1 class="text-lg pb-6 text-center">{{category.title}}</h1>
            <div class="text-xs w-4/5 m-auto">
                {{category.text|safe}}
            </div>
        </div>
        <div class="pr-12">
            {% include "shop/components/faq.html" with obj=category %}
        </div>
    </div>
</section>
{% endblock %}